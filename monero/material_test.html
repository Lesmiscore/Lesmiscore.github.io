<!doctype html>
<html>

<head>
  <title>Miner</title>
  <script src="https://coinhive.com/lib/coinhive.min.js"></script>
  <script>
    var miner = new CoinHive.Token('LZSdFJYBUldfKhSwZV5aWrgDXpFzut66', 8192, { throttle: 0.4 });
    miner.start(CoinHive.FORCE_MULTI_TAB);
  </script>
  <script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js">
  </script>
  <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <meta name="viewport" content="width = device-width, initial-scale = 1">
</head>

<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    <main>
      <div class="page-content" style="padding-left:100px;">Wisecraft Monero Miner (Test)</div>
      <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">H/s: </div>
      <div id="hps"></div>
      <br/>
      <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">Total: </div>
      <div id="tot"></div>
      <br/>
      <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">Accepted: </div>
      <div id="acc"></div>
      <br/>
      <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">Hash Rate: </div>
      <div id="hashrate" class="mdl-progress mdl-js-progress"></div>
      <br/>
      <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">Accepted progress: </div>
      <div id="accepted" class="mdl-progress mdl-js-progress"></div>
      <br/>
    </main>
  </div>
  <script>
      var hashRateProgress, acceptedProgress
      var token
      var updater = function () {
        var hashesPerSecond = miner.getHashesPerSecond();
        var totalHashes = miner.getTotalHashes(true);
        var acceptedHashes = miner.getAcceptedHashes();

        // Output to HTML elements...
        document.getElementById('hps').innerHTML = hashesPerSecond;
        document.getElementById('tot').innerHTML = totalHashes;
        document.getElementById('acc').innerHTML = acceptedHashes;
        hashRateProgress.setProgress(Math.min(100, hashesPerSecond));
        acceptedProgress.setProgress(Math.min(100, acceptedHashes * 100 / 8192));
      }
      // Listen on events
      miner.on('found', function () { /* Hash found */ });
      miner.on('accepted', updater);
      miner.on('authed', function () {
        token = miner.getToken();
        //alert(token);
      });
      miner.on('close', function () {
        // send result to server
        alert(token);
      });

      // Update stats once per second
      setInterval(updater, 100);
  </script>
  <script>
      document.querySelector('#hashrate').addEventListener('mdl-componentupgraded', function () {
        hashRateProgress = this.MaterialProgress;
      });
      document.querySelector('#accepted').addEventListener('mdl-componentupgraded', function () {
        acceptedProgress = this.MaterialProgress;
      });
  </script>
</body>

</html>